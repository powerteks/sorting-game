/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/js/main.js":
/*!************************!*\
  !*** ./src/js/main.js ***!
  \************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _modules_game_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./modules/game.js */ \"./src/js/modules/game.js\");\n\r\n\r\n\r\nnew _modules_game_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]( '.container' );\n\n//# sourceURL=webpack://project/./src/js/main.js?");

/***/ }),

/***/ "./src/js/modules/controller.js":
/*!**************************************!*\
  !*** ./src/js/modules/controller.js ***!
  \**************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Controller)\n/* harmony export */ });\nclass Controller\r\n{\r\n\tconstructor ( store, model, view ) {\r\n\t\tthis.store = store;\r\n\t\tthis.model = model;\r\n\t\tthis.view = view;\r\n\t\tthis.store.cache = false;\r\n\t\tthis.pause = false;\r\n\t\tthis.preventNum = null;\r\n\t\tthis.animation = false;\r\n\r\n\t\tthis.initControl();\r\n\t}\r\n\r\n\tinitControl () {\r\n\t\tthis.store.bottles.forEach( bottle => {\r\n\t\t\tbottle.addEventListener( 'click' , event => this.handleBottle( bottle ) );\r\n\t\t});\r\n\r\n\t\tthis.store.buttons.forEach( button => {\r\n\t\t\tbutton.addEventListener( 'click', event => this.handleButton( button ) );\r\n\t\t});\r\n\r\n\t\tthis.store.blockWin.addEventListener( 'click', event => this.handleBlockWin() );\r\n\t}\r\n\r\n\thandleBottle ( event ) {\r\n\t\tlet cells = [];\r\n\t\tlet bottle = null;\r\n\t\tlet animation = null;\r\n\t\tconst num = event.dataset.num;\r\n\r\n\t\tif ( !this.model.hasFullBottle( num ) ) {\r\n\t\t\tif ( !this.pause ) {\r\n\t\t\t\tif ( this.store.cache ) {\r\n\t\t\t\t\tthis.sendToBottle( num );\r\n\t\t\t\t} else if ( !this.model.hasEmptyBottle( num ) ) {\r\n\t\t\t\t\tthis.sendToCache( num );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.view.animationErrorBottle( num );\r\n\t\t}\r\n\t}\r\n\r\n\thandleButton ( event ) {\r\n\t\tif ( event.textContent === 'Reset' ) {\r\n\t\t\tthis.model.reset();\r\n\t\t\tsetTimeout( () => this.view.reRender( [], true ), 1000);\r\n\t\t}\r\n\r\n\t\tif ( event.textContent === 'Undo' ) {\r\n\t\t\tif ( this.store.history.length > 0 ) {\r\n\t\t\t\tthis.model.moveBack();\r\n\t\t\t\tthis.view.reRender([], true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( event.textContent === 'Restart' ) {\r\n\t\t\tthis.model.restart();\r\n\t\t\tthis.view.reRender( [], true );\r\n\t\t}\r\n\r\n\t\tif ( event.textContent === 'Skin' ) {\r\n\t\t\tconst nextSkin = ( this.store.skin + 1 < this.store.skins ) ? this.store.skin + 1 : 0;\r\n\t\t\tthis.changeSkin ( nextSkin );\r\n\t\t\tthis.view.reRender( [], true );\r\n\t\t}\r\n\t}\r\n\r\n\thandleBlockWin () {\r\n\t\tthis.model.reset();\r\n\t\tthis.view.reRender( [], true );\r\n\t\tthis.view.hideScreenWin();\r\n\t}\r\n\r\n\tsendToCache ( num ) {\r\n\t\tthis.pause = true;\r\n\t\tthis.store.cache = true;\r\n\t\tthis.previousNum = num;\r\n\t\tthis.moveCells = this.model.moveToCache( num );\r\n\r\n\t\tthis.view.animationToCash( num, this.moveCells );\r\n\t\tsetTimeout( () => { this.pause = false; }, this.store.timeAnimation * ( this.moveCells.length + 1 ) );\r\n\t}\r\n\r\n\tsendToBottle ( num ) {\r\n\t\tthis.pause = true;\r\n\t\tthis.store.cache = false;\r\n\t\tconst { bottle, cells, fullBottle, win } = this.model.moveToBottle( num, this.previousNum );\r\n\r\n\t\tif ( this.previousNum === bottle ) {\r\n\t\t\tthis.view.returnToBottle( bottle, cells );\r\n\t\t\tthis.view.animationErrorBottle( num );\r\n\t\t} else {\r\n\t\t\tthis.view.animationToBottle( this.previousNum, bottle, this.moveCells, cells );\r\n\t\t}\r\n\r\n\t\tlet animation = cells.length + 1;\r\n\r\n\t\tif ( fullBottle ) {\r\n\t\t\tsetTimeout( () => {\r\n\t\t\t\tthis.view.animationFullBottle( bottle );\r\n\t\t\t}, this.store.timeAnimation * animation );\r\n\r\n\t\t\tanimation++;\r\n\t\t}\r\n\r\n\t\tsetTimeout( () => {\r\n\t\t\tif ( win ) {\r\n\t\t\t\tthis.pause = true;\r\n\t\t\t\tthis.view.showScreenWin();\r\n\t\t\t\tsetTimeout( () => this.pause = false, 200);\r\n\t\t\t} else {\r\n\t\t\t\tthis.view.reRender( [ this.previousNum, bottle ] );\r\n\t\t\t\tthis.previousNum = null;\r\n\t\t\t\tthis.pause = false;\r\n\t\t\t}\r\n\t\t}, this.store.timeAnimation * animation * 2 );\r\n\t}\r\n\r\n\tchangeSkin ( nextNum ) {\r\n\t\tconst num = this.store.skin;\r\n\r\n\t\tthis.view.applySkin( num, nextNum );\r\n\t\tthis.store.skin = nextNum;\r\n\t\tlocalStorage.setItem( 'skin', nextNum );\r\n\t}\r\n}\n\n//# sourceURL=webpack://project/./src/js/modules/controller.js?");

/***/ }),

/***/ "./src/js/modules/game.js":
/*!********************************!*\
  !*** ./src/js/modules/game.js ***!
  \********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Game)\n/* harmony export */ });\n/* harmony import */ var _model_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./model.js */ \"./src/js/modules/model.js\");\n/* harmony import */ var _store_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./store.js */ \"./src/js/modules/store.js\");\n/* harmony import */ var _view_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./view.js */ \"./src/js/modules/view.js\");\n/* harmony import */ var _controller_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./controller.js */ \"./src/js/modules/controller.js\");\n\r\n\r\n\r\n\r\n\r\n\r\nclass Game\r\n{\r\n\tconstructor ( nameBlock ) {\r\n\t\tconst store = new _store_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]( nameBlock );\r\n\t\tconst model = new _model_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]( store );\r\n\t\tconst view = new _view_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"]( store );\r\n\t\tconst controller = new _controller_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"]( store, model, view );\r\n\t}\r\n}\r\n\n\n//# sourceURL=webpack://project/./src/js/modules/game.js?");

/***/ }),

/***/ "./src/js/modules/model.js":
/*!*********************************!*\
  !*** ./src/js/modules/model.js ***!
  \*********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Model)\n/* harmony export */ });\nclass Model\r\n{\r\n\tconstructor ( store ) {\r\n\t\tthis.store = store;\r\n\t\tstore.setData( 'board', [] );\r\n\t\tstore.setData( 'qtyFullBottle', 12 );\r\n\t\tstore.setData( 'qtyEmptylBottle', 2 );\r\n\t\tstore.setData( 'qtyParts', 4 );\r\n\t\tstore.setData( 'history', [] );\r\n\t\tstore.setData( 'countWin', this.getCountWin() );\r\n\t\tstore.setData( 'skin', 0 );\r\n\t\tthis.counterFullBottle = 0\r\n\t\tthis.cache = [];\r\n\r\n\t\tthis.getBoard();\r\n\t}\r\n\r\n\tgetBoard ( reset = false ) {\r\n\t\tconst board = JSON.parse( localStorage.getItem( 'board' ) );\r\n\r\n\t\tif ( !Array.isArray( board ) || reset ) {\r\n\t\t\tthis.fillBottles();\r\n\r\n\t\t\tconst boardNew = JSON.stringify( this.store.board );\r\n\r\n\t\t\tlocalStorage.setItem( 'board', boardNew );\r\n\t\t\tlocalStorage.setItem( 'startBoard', boardNew );\r\n\t\t\tlocalStorage.setItem( 'skin', this.store.skin );\r\n\t\t}\r\n\r\n\t\tthis.store.board = JSON.parse( localStorage.getItem( 'board' ) );\r\n\t\tthis.store.startBoard = JSON.parse( localStorage.getItem( 'startBoard' ) );\r\n\t\tthis.store.skin = +localStorage.getItem( 'skin' );\r\n\t}\r\n\r\n\tfillBottles () {\r\n\t\tfor ( let bottle = 0; bottle < this.store.qtyFullBottle; bottle++ ) {\r\n\t\t\tthis.store.board.push([]);\r\n\t\t}\r\n\t\r\n\t\tfor ( let bottle = 0; bottle < this.store.qtyFullBottle; bottle++ ) {\r\n\t\t\tfor ( let part = 0; part < this.store.qtyParts; part++ ) {\r\n\t\t\t\tthis.fillBottle( bottle );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor ( let bottle = this.store.qtyFullBottle; bottle < ( this.store.qtyEmptylBottle + this.store.qtyFullBottle ); bottle++ ) {\r\n\t\t\tthis.store.board.push([]);\r\n\r\n\t\t\tfor ( let part = 0; part < this.store.qtyParts; part++ ) {\r\n\t\t\t\tthis.store.board[ bottle ].push( 0 );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.checkFullness();\r\n\t}\r\n\r\n\tcheckFullness () {\r\n\t\tlet i = 0;\r\n\r\n\t\tfor ( let index = 0; index < this.store.board.length; index++ ) {\r\n\t\t\tif ( this.hasFullBottle( index ) ) i++;\r\n\t\t}\r\n\r\n\t\tif ( i > 0 ) this.fillBottles();\r\n\t}\r\n\r\n\tfillBottle ( bottle ) {\r\n\t\tconst random = Math.floor( Math.random() * this.store.qtyFullBottle );\r\n\r\n\t\tif ( this.store.board[ random ].length < this.store.qtyParts ) {\r\n\t\t\tthis.store.board[ random ].push( bottle + 1 );\r\n\t\t} else {\r\n\t\t\tthis.fillBottle ( bottle );\r\n\t\t}\r\n\t}\r\n\r\n\tmoveToCache ( num ) {\r\n\t\tconst bottle = this.store.board[ num ];\r\n\t\tconst value = bottle[ this.getLastZeroIndex( bottle ) + 1 ];\r\n\t\tconst cells = [];\r\n\r\n\t\tthis.store.history.push( JSON.parse( JSON.stringify( this.store.board) ) );\r\n\t\tfor ( let index = this.getLastZeroIndex( bottle ) + 1; index < this.store.qtyParts; index++ ) {\r\n\t\t\tif ( bottle[ index ] === value ) {\r\n\t\t\t\tthis.cache.push( bottle[ index ] );\r\n\t\t\t\tthis.store.board[ num ][ index ] = 0;\r\n\t\t\t\tcells.push( index );\r\n\t\t\t} else if ( this.store.board[ index ] !== 0 ) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn ( cells.length > 0 ) ? cells : false;\r\n\t}\r\n\r\n\tmoveToBottle ( num, previousNum ) {\r\n\t\tconst cells = [];\r\n\t\tlet bottomEmptyCell = null;\r\n\t\tlet bottle = null;\r\n\r\n\t\tconst firstIndex = ( this.getLastZeroIndex( this.store.board[ num ] ) !== 3 ) ? this.getLastZeroIndex( this.store.board[ num ] ) + 1 : 3;\r\n\t\tconst firstPart = this.store.board[ num ][ firstIndex ];\r\n\t\tif ( this.hasFreePlaces( num ) && ( firstPart === this.cache[0] || firstPart === 0 )) {\r\n\t\t\tbottle = num;\r\n\t\t} else {\r\n\t\t\tbottle = previousNum;\r\n\t\t\tthis.store.history.pop();\r\n\t\t}\r\n\r\n\t\tbottomEmptyCell = this.getLastZeroIndex( this.store.board[ bottle ] );\r\n\t\tfor ( let index = this.cache.length - 1; index > -1; index-- ) {\r\n\t\t\tthis.store.board[ bottle ][ bottomEmptyCell ] = this.cache[ index ];\r\n\t\t\tcells.push( bottomEmptyCell );\r\n\t\t\tbottomEmptyCell--;\r\n\t\t}\r\n\r\n\t\tthis.cache = [];\r\n\t\tconst fullBottle = this.hasFullBottle( num );\r\n\t\tlet win = false;\r\n\t\tif ( fullBottle ) {\r\n\t\t\twin = this.hasFullBottles();\r\n\t\t}\r\n\r\n\t\tif ( win ) {\r\n\t\t\tthis.store.countWin++;\r\n\t\t\tlocalStorage.setItem( 'countWin', this.store.countWin );\r\n\t\t}\r\n\r\n\t\tlocalStorage.setItem( 'board', JSON.stringify( this.store.board ) );\r\n\r\n\t\treturn {\r\n\t\t\tbottle: bottle,\r\n\t\t\tcells: cells,\r\n\t\t\tfullBottle: fullBottle,\r\n\t\t\twin: win,\r\n\t\t}\r\n\t}\r\n\r\n\tgetLastZeroIndex ( array ) {\r\n\t\tfor ( let index = 0; index < array.length; index++ ) {\r\n\t\t\tif ( array[ index ] !== 0 ) {\r\n\t\t\t\treturn index - 1;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn 3;\r\n\t}\r\n\r\n\thasFullBottle ( num ) {\r\n\t\tif ( this.store.board[ num ][ 0 ] !== 0 ) {\r\n\t\t\treturn this.store.board[ num ].every( element => element === this.store.board[ num ][ 0 ] );\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\thasEmptyBottle ( num ) {\r\n\t\treturn this.store.board[ num ].every( element => element === 0 );\r\n\t}\r\n\r\n\thasFullBottles () {\r\n\t\tlet counterFullBottle = 0;\r\n\t\t\r\n\t\tfor ( let bottle = 0; bottle < this.store.board.length; bottle++ ) {\r\n\t\t\tif ( this.hasFullBottle ( bottle ) ) counterFullBottle++;\r\n\t\t}\r\n\r\n\t\treturn ( counterFullBottle === this.store.qtyFullBottle ) ? true : false;\r\n\t}\r\n\r\n\thasFreePlaces ( num ) {\r\n\t\tfor ( let index = 0; index < this.store.qtyParts; index++ ) {\r\n\t\t\tif ( this.store.board[ num ][ index ] === 0 && index + 1 === this.cache.length ) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tmoveBack () {\r\n\t\tthis.store.board = this.store.history.pop();\r\n\t}\r\n\r\n\tgetCountWin () {\r\n\t\tif ( localStorage.getItem( 'countWin' ) === null || localStorage.getItem( 'countWin' ) === 'undefined' ) {\r\n\t\t\tlocalStorage.setItem( 'countWin', 0 );\r\n\t\t}\r\n\r\n\t\treturn localStorage.getItem( 'countWin' );\r\n\t}\r\n\r\n\trestart () {\r\n\t\tthis.store.board = JSON.parse( localStorage.getItem( 'startBoard' ) );\r\n\t\tthis.store.history = [];\r\n\t}\r\n\r\n\treset () {\r\n\t\tthis.store.board = [];\r\n\t\tthis.store.history = [];\r\n\t\tthis.getBoard( true );\r\n\t}\r\n}\n\n//# sourceURL=webpack://project/./src/js/modules/model.js?");

/***/ }),

/***/ "./src/js/modules/store.js":
/*!*********************************!*\
  !*** ./src/js/modules/store.js ***!
  \*********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Store)\n/* harmony export */ });\nclass Store\r\n{\r\n\tconstructor ( nameBlock ) {\r\n\t\tthis.nameBlock = nameBlock ? nameBlock : 'body';\r\n\t}\r\n\r\n\tsetData ( key, value ) {\r\n\t\tthis[key] = value;\r\n\t}\r\n}\n\n//# sourceURL=webpack://project/./src/js/modules/store.js?");

/***/ }),

/***/ "./src/js/modules/view.js":
/*!********************************!*\
  !*** ./src/js/modules/view.js ***!
  \********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (class\r\n{\r\n\t#buttons = [\r\n\t\t['Reset', '<svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:svg=\"http://www.w3.org/2000/svg\"><path d=\"M 10,0 C 4.4862716,0 0,4.4862716 0,10 0,15.513766 4.4862757,20 10,20 15.513762,20 20,15.513762 20,10 20,4.4862757 15.513766,0 10,0 Z m 0,1.5384615 c 4.682326,0 8.461538,3.7792524 8.461538,8.4615385 0,4.68233 -3.779208,8.461538 -8.461538,8.461538 C 5.3177139,18.461538 1.5384615,14.682326 1.5384615,10 1.5384615,5.3177182 5.3177182,1.5384615 10,1.5384615 Z M 4.8717949,5.1282051 c -0.4248345,0 -0.7692308,0.3443963 -0.7692308,0.7692308 V 8.359375 c 0,0.457458 0.3611879,0.769231 0.7692308,0.769231 h 2.5641025 c 0.4248346,0 0.7692306,-0.344396 0.7692306,-0.769231 0,-0.424834 -0.344396,-0.7692308 -0.7692306,-0.7692308 H 7.0773237 C 7.6760783,7.1531939 8.380585,6.7994846 9.192709,6.7027244 c 0.914462,-0.1089535 1.850405,0.038111 2.646234,0.410657 0.795922,0.3725901 1.405564,0.9440436 1.754807,1.6045676 0.1986,0.375612 0.664048,0.519107 1.039663,0.320513 C 15.009029,8.839867 15.152548,8.374399 14.953926,7.998798 14.432023,7.0118603 13.561689,6.2219064 12.491988,5.7211538 11.422367,5.2204392 10.198614,4.9751675 9.010416,5.1742789 7.6639578,5.3999106 6.5626941,5.9121331 5.6410256,6.660657 V 5.8974359 c 0,-0.4248345 -0.3443963,-0.7692308 -0.7692307,-0.7692308 z m 7.6923081,5.7431889 c -0.424835,0 -0.769231,0.344396 -0.769231,0.769231 0,0.424834 0.344396,0.76923 0.769231,0.76923 h 0.358573 c -0.59875,0.436955 -1.292858,0.786883 -2.115385,0.887421 C 9.984764,13.397809 8.956928,13.259206 8.161057,12.886618 7.3651466,12.514016 6.755475,11.942535 6.4062501,11.282051 6.2076488,10.906439 5.7422018,10.762944 5.3665866,10.961538 c -0.3756153,0.198595 -0.5191364,0.664064 -0.3205129,1.039664 0.521898,0.986917 1.3923118,1.776904 2.4619391,2.277644 1.0696232,0.50074 2.2933822,0.745985 3.4815712,0.546875 1.346456,-0.225632 2.447725,-0.737849 3.36939,-1.486378 v 0.763221 c 0,0.424835 0.344396,0.769231 0.769231,0.769231 0.424835,0 0.769231,-0.344396 0.769231,-0.769231 v -2.461939 c 0,-0.400414 -0.386777,-0.769231 -0.769231,-0.769231 z\" /></svg>'],\r\n\t\t['Undo', '<svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:svg=\"http://www.w3.org/2000/svg\"><path d=\"M 10,0 C 4.486272,0 0,4.486272 0,10 0,15.513765 4.4862761,20 10,20 15.513761,20 20,15.513761 20,10 20,4.4862761 15.513765,0 10,0 Z m 0,1.5390625 c 4.682326,0 8.460938,3.778651 8.460937,8.4609375 0,4.68233 -3.778607,8.460937 -8.460937,8.460937 C 5.3177135,18.460937 1.5390625,14.682326 1.5390625,10 1.5390625,5.3177176 5.3177176,1.5390625 10,1.5390625 Z M 4.8710937,7.1796875 C 4.4467874,7.1805987 4.1033485,7.5249114 4.1035156,7.9492187 v 3.0761723 c 0,0.383637 0.2928329,0.769531 0.7675806,0.769531 h 3.078125 C 8.3742895,11.795087 8.7189164,11.450459 8.71875,11.025391 8.7189169,10.600321 8.3742883,10.255692 7.9492187,10.255859 H 6.7714844 C 7.6639671,9.5235158 8.5488176,8.9038618 9.5898438,8.7617188 10.580835,8.6264263 11.591818,8.807067 12.464844,9.2753906 c 0.873071,0.4683489 1.560901,1.1969834 1.964844,2.0722654 0.177706,0.386467 0.635332,0.555342 1.021484,0.376953 0.385718,-0.178439 0.553643,-0.635861 0.375,-1.021484 C 15.279757,9.5191272 14.353409,8.5432643 13.191406,7.9199219 12.029356,7.2965544 10.694589,7.0591944 9.3828125,7.2382812 7.8242673,7.451087 6.6901095,8.2940614 5.640625,9.1894531 V 7.9492187 C 5.6407915,7.5241494 5.296163,7.179521 4.8710937,7.1796875 Z\"/></svg>'],\r\n\t\t['Restart', '<svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:svg=\"http://www.w3.org/2000/svg\"><path d=\"M 10,0 C 4.4862771,0 0,4.4862771 0,10 0,15.513761 4.4862812,20 10,20 15.513757,20 20,15.513757 20,10 20,4.4862812 15.513761,0 10,0 Z m 0,1.5384615 c 4.682321,0 8.461538,3.7792572 8.461538,8.4615385 0,4.682325 -3.779213,8.461538 -8.461538,8.461538 C 5.3177187,18.461538 1.5384615,14.682321 1.5384615,10 1.5384615,5.3177229 5.3177229,1.5384615 10,1.5384615 Z M 5.8974359,4.1025641 c -0.4248341,0 -0.7692308,0.3443967 -0.7692308,0.7692308 V 7.948718 c 0,0.419975 0.3321114,0.769231 0.7692308,0.769231 H 8.974359 c 0.424835,0 0.769231,-0.344396 0.769231,-0.769231 0,-0.4248341 -0.344396,-0.7692308 -0.769231,-0.7692308 H 8.435496 c 0.360925,-0.201957 0.716927,-0.4269112 1.09976,-0.4807693 0.71578,-0.1007075 1.444578,0.034893 2.077325,0.3846154 0.632605,0.3497003 1.134816,0.8948167 1.430288,1.5544877 0.295378,0.659684 0.368691,1.396586 0.208333,2.101362 -0.160453,0.704826 -0.545907,1.33797 -1.097757,1.804888 -0.551869,0.466933 -1.239567,0.741748 -1.961137,0.783253 C 9.470558,13.368834 8.754795,13.174928 8.153045,12.774439 7.5513448,12.373985 7.0951594,11.789449 6.854968,11.107772 6.7141496,10.70651 6.2744626,10.495639 5.8733974,10.637019 c -0.4004652,0.141645 -0.6103175,0.581078 -0.46875,0.981571 0.3509663,0.996062 1.0157708,1.852717 1.8950321,2.4379 0.8792105,0.585151 1.9263175,0.867937 2.9807695,0.807293 1.054425,-0.06065 2.060305,-0.46164 2.866586,-1.143831 0.806303,-0.682208 1.368148,-1.608488 1.602564,-2.638221 C 14.983908,10.051946 14.87871,8.972716 14.447116,8.008814 14.015409,7.0449804 13.282086,6.2481338 12.357772,5.7371795 11.433394,5.2262685 10.36677,5.0291337 9.320914,5.1762821 8.226335,5.3302705 7.4088573,5.8561716 6.6666667,6.4122596 V 4.8717949 c 0,-0.4248341 -0.3443968,-0.7692308 -0.7692308,-0.7692308 z\"/></svg>'],\r\n\t\t['Skin', '<svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" version=\"1.1\" xml:space=\"preserve\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:svg=\"http://www.w3.org/2000/svg\"><path d=\"M 10 0 C 4.4862771 0 0 4.4862771 0 10 C 0 15.51376 4.4862812 20 10 20 C 15.513756 20 20 15.513756 20 10 C 20 4.4862812 15.51376 0 10 0 z M 10 1.5390625 C 14.682321 1.5390625 18.460938 5.3177186 18.460938 10 C 18.460938 14.682325 14.682325 18.460938 10 18.460938 C 5.3177186 18.460938 1.5390625 14.682321 1.5390625 10 C 1.5390625 5.3177229 5.3177229 1.5390625 10 1.5390625 z M 6.8789062 4.0566406 C 5.3296438 4.0566406 4.0566406 5.3283427 4.0566406 6.8769531 C 4.0566406 8.4255626 5.3296438 9.6992188 6.8789062 9.6992188 C 8.4281677 9.6992188 9.6992188 8.4255626 9.6992188 6.8769531 C 9.6992188 5.3283427 8.4281677 4.0566406 6.8789062 4.0566406 z M 13.121094 4.0566406 C 11.571831 4.0566406 10.300781 5.3283427 10.300781 6.8769531 C 10.300781 8.4255626 11.571831 9.6992188 13.121094 9.6992188 C 14.670355 9.6992188 15.943359 8.4255626 15.943359 6.8769531 C 15.943359 5.3283427 14.670355 4.0566406 13.121094 4.0566406 z M 6.8789062 5.5957031 C 7.5963745 5.5957031 8.1601562 6.1597858 8.1601562 6.8769531 C 8.1601562 7.5941204 7.5963745 8.1601562 6.8789062 8.1601562 C 6.161436 8.1601562 5.5957031 7.5941204 5.5957031 6.8769531 C 5.5957031 6.1597858 6.161436 5.5957031 6.8789062 5.5957031 z M 13.121094 5.5957031 C 13.838562 5.5957031 14.402344 6.1597858 14.402344 6.8769531 C 14.402344 7.5941204 13.838562 8.1601562 13.121094 8.1601562 C 12.403623 8.1601562 11.837891 7.5941204 11.837891 6.8769531 C 11.837891 6.1597858 12.403623 5.5957031 13.121094 5.5957031 z M 6.8789062 10.300781 C 5.3296438 10.300781 4.0566406 11.572483 4.0566406 13.121094 C 4.0566406 14.669703 5.3296438 15.943359 6.8789062 15.943359 C 8.4281677 15.943359 9.6992188 14.669703 9.6992188 13.121094 C 9.6992188 11.572483 8.4281677 10.300781 6.8789062 10.300781 z M 13.121094 10.300781 C 11.571831 10.300781 10.300781 11.572483 10.300781 13.121094 C 10.300781 14.669703 11.571831 15.943359 13.121094 15.943359 C 14.670355 15.943359 15.943359 14.669703 15.943359 13.121094 C 15.943359 11.572483 14.670355 10.300781 13.121094 10.300781 z M 6.8789062 11.839844 C 7.5963745 11.839844 8.1601562 12.403926 8.1601562 13.121094 C 8.1601562 13.838261 7.5963745 14.404297 6.8789062 14.404297 C 6.161436 14.404297 5.5957031 13.838261 5.5957031 13.121094 C 5.5957031 12.403926 6.161436 11.839844 6.8789062 11.839844 z M 13.121094 11.839844 C 13.838562 11.839844 14.402344 12.403926 14.402344 13.121094 C 14.402344 13.838261 13.838562 14.404297 13.121094 14.404297 C 12.403623 14.404297 11.837891 13.838261 11.837891 13.121094 C 11.837891 12.403926 12.403623 11.839844 13.121094 11.839844 z \" /></svg>'],\r\n\t];\r\n\t#skins = 2\r\n\r\n\tconstructor ( store ) {\r\n\t\tthis.store = store\r\n\t\tthis.store.setData( 'timeAnimation', 100 );\r\n\t\tthis.store.setData( 'skins', this.#skins );\r\n\t\tthis.heightPart = null;\r\n\t\tthis.beginSecondRow = this.store.board.length / 2;\r\n\r\n\t\tthis.renderControl();\r\n\t\tthis.renderBoard();\r\n\r\n\t\tthis.renderBottles();\r\n\t\tthis.renderCell();\r\n\r\n\t\tthis.applySkin( this.store.skin, -1 );\r\n\t}\r\n\r\n\trender () {\r\n\t\tthis.renderBottles();\r\n\t\tthis.renderCell();\r\n\t}\r\n\r\n\trenderBoard () {\r\n\t\tconst element = document.querySelector( this.store.nameBlock );\r\n\r\n\t\tthis.boardBlock = document.createElement( 'div' );\r\n\t\tthis.boardBlock.classList.add( 'board' );\r\n\r\n\t\telement.appendChild( this.boardBlock );\r\n\t}\r\n\r\n\trenderBottles () {\r\n\t\tthis.store.setData( 'bottles', [] );\r\n\r\n\t\tfor ( let bottle = 0; bottle < this.store.board.length; bottle++ ) {\r\n\t\t\tthis.store.bottles[ bottle ] = document.createElement( 'div' );\r\n\t\t\tthis.store.bottles[ bottle ].classList.add( 'bottle', 'bottle-' + bottle );\r\n\t\t\tthis.store.bottles[ bottle ].dataset.num = bottle;\r\n\t\t\tconst inner = document.createElement( 'div' );\r\n\t\t\tinner.classList.add( 'bottle__inner' );\r\n\r\n\t\t\tthis.store.bottles[ bottle ].appendChild( inner );\r\n\r\n\t\t\tthis.renderCap( this.store.bottles[ bottle ], bottle );\r\n\r\n\t\t\tthis.boardBlock.appendChild( this.store.bottles[ bottle ] );\r\n\t\t}\r\n\r\n\t\tthis.store.setData( 'bottles', this.store.bottles );\r\n\r\n\t\tthis.store.setData( 'blockWin', document.createElement( 'div' ) );\r\n\t\tthis.store.blockWin.classList.add( 'block-win' );\r\n\r\n\t\tconst blockWinText = document.createElement( 'p' );\r\n\t\tblockWinText.classList.add( 'block-win__title' );\r\n\t\tblockWinText.textContent = 'Win!';\r\n\r\n\t\tconst blockWinsText = document.createElement( 'p' );\r\n\t\tblockWinsText.classList.add( 'block-win__text' );\r\n\t\tthis.blockWinCount = document.createElement( 'span' );\r\n\t\tthis.blockWinCount.classList.add( 'block-win__count' );\r\n\r\n\t\tconst description = document.createElement( 'span' );\r\n\t\tdescription.classList.add( 'block-win__description' );\r\n\t\tdescription.textContent = ' wins';\r\n\t\tblockWinsText.appendChild( this.blockWinCount );\r\n\t\tblockWinsText.appendChild( description );\r\n\r\n\t\tthis.store.blockWin.appendChild( blockWinText );\r\n\t\tthis.store.blockWin.appendChild( blockWinsText );\r\n\t\tthis.boardBlock.appendChild( this.store.blockWin );\r\n\t}\r\n\r\n\trenderCap ( bottle, num ) {\r\n\t\t\r\n\t\tfunction hasFullBottle( bottle ) {\r\n\t\t\tif ( bottle[ 0 ] !== 0 ) {\r\n\t\t\t\treturn bottle.every( element => element === bottle[ 0 ] );\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( hasFullBottle ( this.store.board[ num ] ) ) {\r\n\t\t\tbottle.childNodes[ 0 ].classList.add( 'bottle__inner_full' );\r\n\t\t} else {\r\n\t\t\tif ( bottle.classList.contains( 'bottle__full' ) ) bottle.classList.remove( 'bottle__full' );\r\n\t\t\tif ( bottle.childNodes[ 0 ].classList.contains( 'bottle__inner_full' ) ) bottle.childNodes[ 0 ].classList.remove( 'bottle__inner_full' );\r\n\t\t}\r\n\t}\r\n\r\n\trenderCell () {\r\n\t\tfor ( let bottle = 0; bottle < this.store.board.length; bottle++ ) {\r\n\t\t\tfor ( let part = 0; part < this.store.qtyParts; part++ ) {\r\n\t\t\t\tconst partData = this.store.board[ bottle ][ part ];\r\n\r\n\t\t\t\tconst cell = document.createElement( 'div' );\r\n\t\t\t\tcell.classList.add( 'cell' );\r\n\t\t\t\tconst ball = document.createElement( 'div' );\r\n\t\t\t\tball.classList.add( 'part', 'part__' + ( part + 1 ), 'part-' + partData );\r\n\t\t\t\tball.appendChild( document.createElement( 'span' ) );\r\n\t\t\t\tcell.appendChild( ball );\r\n\r\n\t\t\t\tthis.store.bottles[ bottle ].childNodes[ 0 ].appendChild( cell );\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\trenderControl () {\r\n\t\tconst element = document.querySelector( this.store.nameBlock );\r\n\t\tconst buttons = this.#buttons;\r\n\t\tthis.store.setData( 'buttons', [] );\r\n\r\n\t\tconst control = document.createElement( 'div' );\r\n\t\tcontrol.classList.add( 'control' );\r\n\r\n\t\tbuttons.forEach( button => {\r\n\t\t\tthis[ 'button' + button[ 0 ] ] = document.createElement( 'button' );\r\n\t\t\tthis[ 'button' + button[ 0 ] ].classList.add( 'button', 'button__' + button[ 0 ].toLowerCase() );\r\n\t\t\tconst span = document.createElement( 'span' );\r\n\t\t\tspan.textContent = button[ 0 ];\r\n\t\t\tspan.classList.add( 'button__text' );\r\n\t\t\tthis[ 'button' + button[ 0 ] ].innerHTML = button[ 1 ];\r\n\t\t\tthis[ 'button' + button[ 0 ] ].appendChild( span );\r\n\t\t\tcontrol.appendChild( this[ 'button' + button[ 0 ] ] );\r\n\r\n\t\t\tthis.store.buttons.push( this[ 'button' + button[ 0 ] ] );\r\n\t\t});\r\n\r\n\t\tlet counter = document.createElement( 'p' );\r\n\t\tcounter.classList.add( 'counter' );\r\n\t\tlet description = document.createElement( 'span' );\r\n\t\tdescription.classList.add( 'counter__description' );\r\n\t\tdescription.textContent = 'Wins: ';\r\n\t\tthis.counterWin = document.createElement( 'span' );\r\n\t\tthis.counterWin.classList.add( 'counter__wins' );\r\n\t\tthis.counterWin.textContent = this.store.countWin;\r\n\t\tcounter.appendChild( description );\r\n\t\tcounter.appendChild( this.counterWin );\r\n\t\tcontrol.appendChild( counter );\r\n\r\n\t\telement.appendChild( control );\r\n\t}\r\n\r\n\treRender ( bottles, full = false ) {\r\n\t\tif ( full ) {\r\n\t\t\tfor ( let index = 0; index < this.store.board.length; index++ ) {\r\n\t\t\t\tbottles.push( index );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tbottles.forEach( bottle => {\r\n\t\t\tif ( full ) this.renderCap( this.store.bottles[ +bottle ], bottle );\r\n\r\n\t\t\tfor ( let part = 0; part < this.store.qtyParts; part++ ) {\r\n\t\t\t\tconst partData = this.store.board[ +bottle ][ part ];\r\n\t\t\t\tthis.store.bottles[ +bottle ].childNodes[ 0 ].childNodes[ part ].childNodes[ 0 ].className = 'part part__' + ( part + 1 ) + ' part-' + partData;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tanimationToCash ( bottle, cells ) {\r\n\t\tconst bottleBlock = this.store.bottles[ bottle ].childNodes[ 0 ];\r\n\t\tconst start = cells[ 0 ]\r\n\t\tlet i = cells.length;\r\n\t\tlet animation = 0;\r\n\t\t\r\n\t\tfor ( let index = start; index < ( start + cells.length); index++ ) {\r\n\t\t\tbottleBlock.childNodes[ index ].childNodes[ 0 ].classList.add( 'part__up' );\r\n\t\t\tsetTimeout( () => {\r\n\t\t\t\tbottleBlock.childNodes[ index ].childNodes[ 0 ].classList.add( 'part__up-' + i );\r\n\t\t\t\ti--;\r\n\t\t\t}, this.store.timeAnimation * animation );\r\n\t\t\tanimation++;\r\n\t\t}\r\n\t}\r\n\r\n\tanimationToBottle ( bottle, toBottle, moveCells, cells ) {\r\n\t\tconst bottleBlock = this.store.bottles[ bottle ].childNodes[0];\r\n\t\tlet i = 0;\r\n\t\tconst { row, parkingPart } = this.moveRow( bottle, toBottle );\r\n\t\tconst column = this.moveBottle( bottle, toBottle );\r\n\r\n\t\tfor ( let index = 0; index < moveCells.length; index++ ) {\r\n\t\t\tbottleBlock.childNodes[ moveCells[ index ] ].childNodes[ 0 ].classList.add( row, column );\r\n\t\t}\r\n\r\n\t\tmoveCells.reverse();\r\n\t\tfor ( let index = 0; index < moveCells.length; index++ ) {\r\n\t\t\tsetTimeout( () => {\r\n\t\t\t\tbottleBlock.childNodes[ moveCells[ index ] ].childNodes[ 0 ].classList.add( parkingPart + ( cells[ index ] + 1 ) );\r\n\t\t\t}, this.store.timeAnimation * ( i + 1 ) );\r\n\t\t\ti++;\r\n\t\t}\r\n\t}\r\n\r\n\treturnToBottle( bottle, cells ) {\r\n\t\tconst bottleBlock = this.store.bottles[ bottle ].childNodes[ 0 ];\r\n\t\tconst start = cells[ 0 ]\r\n\t\tlet i = cells.length;\r\n\t\tlet animation = 0;\r\n\r\n\t\tfor ( let index = start; index > ( start - cells.length ); index-- ) {\r\n\t\t\tsetTimeout( () => {\r\n\t\t\t\tbottleBlock.childNodes[ index ].childNodes[ 0 ].classList.remove( 'part__up', 'part__up-' + i);\r\n\t\t\t\ti--;\r\n\t\t\t}, this.store.timeAnimation * animation );\r\n\t\t\tanimation++;\r\n\t\t}\r\n\t}\r\n\r\n\tanimationErrorBottle ( bottle ) {\r\n\t\tthis.store.bottles[ bottle ].classList.add( 'bottle__error' );\r\n\r\n\t\tsetTimeout( () => {\r\n\t\t\tthis.store.bottles[ bottle ].classList.remove( 'bottle__error' );\r\n\t\t}, this.store.timeAnimation * 3 );\r\n\t\t\r\n\t}\r\n\r\n\tanimationFullBottle ( bottle ) {\r\n\t\tthis.store.bottles[ bottle ].classList.add( 'bottle__full' );\r\n\t}\r\n\r\n\tshowScreenWin () {\r\n\t\tthis.counterWin.innerHTML = this.store.countWin;\r\n\t\tthis.blockWinCount.innerHTML = this.store.countWin;\r\n\t\tthis.store.blockWin.classList.add( '_show' );\r\n\t}\r\n\r\n\thideScreenWin () {\r\n\t\tthis.store.blockWin.classList.remove( '_show' );\r\n\t}\r\n\r\n\tmoveRow ( bottle, toBottle ) {\r\n\t\tlet moveRow = '';\r\n\t\tlet parkingPart = '';\r\n\r\n\t\tif ( bottle < this.beginSecondRow && !( toBottle < this.beginSecondRow ) ) {\r\n\t\t\tmoveRow = 'part__bottom';\r\n\t\t\tparkingPart = 'part__bottom-parking-';\r\n\t\t} else if ( !( bottle < this.beginSecondRow ) && toBottle < this.beginSecondRow ) {\r\n\t\t\tmoveRow = 'part__top';\r\n\t\t\tparkingPart = 'part__top-parking-';\r\n\t\t} else {\r\n\t\t\tmoveRow = 'on-row';\r\n\t\t\tparkingPart = 'part__parking-';\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\trow: moveRow,\r\n\t\t\tparkingPart: parkingPart\r\n\t\t}\r\n\t}\r\n\r\n\tmoveBottle ( bottle, toBottle ) {\r\n\t\tlet moveColumn = 'not-move';\r\n\t\tbottle = ( bottle < this.beginSecondRow ) ? bottle : bottle - 7;\r\n\t\ttoBottle = ( toBottle < this.beginSecondRow ) ? toBottle : toBottle - 7;\r\n\r\n\t\tif ( bottle < toBottle ) {\r\n\t\t\tmoveColumn = 'part__right-' + ( toBottle - bottle );\r\n\t\t} else {\r\n\t\t\tmoveColumn = 'part__left-' + ( bottle - toBottle );\r\n\t\t}\r\n\r\n\t\treturn moveColumn;\r\n\t}\r\n\r\n\tapplySkin ( num, nextNum ) {\r\n\t\tif ( nextNum > -1 ) {\r\n\t\t\tthis.boardBlock.classList.remove( 'board_skin-' + num );\r\n\t\t\tthis.boardBlock.classList.add( 'board_skin-' + nextNum );\r\n\t\t} else {\r\n\t\t\tthis.boardBlock.classList.add( 'board_skin-' + num );\r\n\t\t}\r\n\t}\r\n});\r\n\r\n\n\n//# sourceURL=webpack://project/./src/js/modules/view.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	__webpack_require__("./src/js/main.js");
/******/ 	__webpack_require__("./src/js/modules/controller.js");
/******/ 	__webpack_require__("./src/js/modules/game.js");
/******/ 	__webpack_require__("./src/js/modules/model.js");
/******/ 	__webpack_require__("./src/js/modules/store.js");
/******/ 	var __webpack_exports__ = __webpack_require__("./src/js/modules/view.js");
/******/ 	
/******/ })()
;